meta: 'An example fit using Colibri, reduced DIS dataset.'

#######################
# Data and theory specs
#######################

dataset_inputs:    
  # Hadronic
  - {dataset: DYE886R_dw_ite, frac: 0.75, cfac: [QCD]}
  - {dataset: DYE886P, frac: 0.75, cfac: [QCD]}
  - {dataset: DYE605_dw_ite, frac: 0.75, cfac: [QCD]}
  - {dataset: DYE906R_dw_ite, frac: 0.75, cfac: [ACC, QCD]}
  - {dataset: CDFZRAP_NEW, frac: 0.75, cfac: [QCD]}
  - {dataset: D0ZRAP_40, frac: 0.75, cfac: [QCD]}
  - {dataset: D0WMASY, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASWZRAP36PB, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASZHIGHMASS49FB, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASLOMASSDY11EXT, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASWZRAP11CC, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASWZRAP11CF, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASDY2D8TEV, frac: 0.75, cfac: [QCDEWK]}
  - {dataset: ATLAS_DY_2D_8TEV_LOWMASS, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_WZ_TOT_13TEV, frac: 0.75, cfac: [NRM, QCD]}
  - {dataset: ATLAS_WP_JET_8TEV_PT, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_WM_JET_8TEV_PT, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASZPT8TEVMDIST, frac: 0.75, cfac: [QCD], sys: 10}
  - {dataset: ATLASZPT8TEVYDIST, frac: 0.75, cfac: [QCD], sys: 10}
  - {dataset: ATLASTTBARTOT7TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASTTBARTOT8TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_TTBARTOT_13TEV_FULLLUMI, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_TTB_DIFF_8TEV_LJ_TRAPNORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_TTB_DIFF_8TEV_LJ_TTRAPNORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_TOPDIFF_DILEPT_8TEV_TTRAPNORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLASPHT15_SF, frac: 0.75, cfac: [QCD, EWK]}
  - {dataset: ATLAS_SINGLETOP_TCH_R_7TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_SINGLETOP_TCH_R_13TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_SINGLETOP_TCH_DIFF_7TEV_T_RAP_NORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_SINGLETOP_TCH_DIFF_7TEV_TBAR_RAP_NORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_SINGLETOP_TCH_DIFF_8TEV_T_RAP_NORM, frac: 0.75, cfac: [QCD]}
  - {dataset: ATLAS_SINGLETOP_TCH_DIFF_8TEV_TBAR_RAP_NORM, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSWEASY840PB, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSWMASY47FB, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSDY2D11, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSWMU8TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSZDIFF12, frac: 0.75, cfac: [QCD, NRM], sys: 10}
  - {dataset: CMSTTBARTOT7TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSTTBARTOT8TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSTTBARTOT13TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSTOPDIFF8TEVTTRAPNORM, frac: 0.75, cfac: [QCD]}
  - {dataset: CMSTTBARTOT5TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_TTBAR_2D_DIFF_MTT_TRAP_NORM, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_TTB_DIFF_13TEV_2016_2L_TRAP, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_TTB_DIFF_13TEV_2016_LJ_TRAP, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_SINGLETOP_TCH_TOT_7TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_SINGLETOP_TCH_R_8TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: CMS_SINGLETOP_TCH_R_13TEV, frac: 0.75, cfac: [QCD]}
  - {dataset: LHCBZ940PB, frac: 0.75, cfac: [QCD]}
  - {dataset: LHCBZEE2FB_40, frac: 0.75, cfac: [QCD]}
  - {dataset: LHCBWZMU7TEV, frac: 0.75, cfac: [NRM, QCD]}
  - {dataset: LHCBWZMU8TEV, frac: 0.75, cfac: [NRM, QCD]}
  - {dataset: LHCB_Z_13TEV_DIMUON, frac: 0.75, cfac: [QCD]}
  - {dataset: LHCB_Z_13TEV_DIELECTRON, frac: 0.75, cfac: [QCD]}

theoryid: 400                          # The theory from which the predictions are drawn.
use_cuts: internal                     # The kinematic cuts to be applied to the data.

closure_test_level: 0                  # The closure test level: False for experimental, level 0
                                       # for pseudodata with no noise, level 1 for pseudodata with
                                       # noise.
closure_test_pdf: NNPDF31_nnlo_as_0118 # The closure test PDF used if closure_level is not False
reduced_xgrid_data: True               # An artefact of the old grid_pdf implementation,
                                       # ensuring we generate closure test data using the model.

#####################
# Loss function specs
#####################

positivity:                            # Positivity datasets, used in the positivity penalty.
  posdatasets:
  - {dataset: POSF2U, maxlambda: 1e6}

alpha: 1e-7                           
lambda_positivity: 0                 

use_fit_t0: True                       # Whether the t0 covariance is used in the chi2 loss.
t0pdfset: NNPDF31_nnlo_as_0118         # The t0 PDF used to build the t0 covariance matrix.


#############
# Model specs
#############
flavour_mapping: ["\\Sigma", "g", "V"]
# Grid PDF settings
grid_pdf_settings:
  xgrids:
    photon: []
    \Sigma: [0.001, 0.01, 0.05]
    g: [0.001, 0.01, 0.05]
    V: [0.001, 0.01, 0.05]
    V3: []
    V8: []
    V15: []
    V24: []
    V35: []
    T3: []
    T8: []
    T15: []
    T24: []
    T35: []


###################
# Methodology specs
###################

bayesian_fit: True
# Nested Sampling settings
ns_settings:
  n_posterior_samples: 10
  ReactiveNS_settings:
    vectorized: False
    ndraw_max: 500
  Run_settings:
    min_num_live_points: 500
    min_ess: 50
    frac_remain: 0.01

prior_settings:
  type: 'uniform_pdf_prior'            # The type of prior used in Nested Sampling (model dependent)
  pdf_prior: NNPDF31_nnlo_as_0118      # For this prior type, uniform band around this PDF
  nsigma: 5                           # Size of the uniform band around the PDF

actions_:
- ultranest_fit                        # Choose from ultranest_fit, monte_carlo_fit, analytic_fit
